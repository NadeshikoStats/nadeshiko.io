<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/stylesheet.css">
  <link rel="shortcut icon" type="image/x-icon" href="/img/logo.png">
  <link rel="preload" href="/img/games/bedwars/lobby.png" as="image">
  <link rel="preload" href="/img/games/skywars/lobby.png" as="image">
  <link rel="preload" href="/img/games/network/lobby.png" as="image">
  <link rel="preload" href="/img/games/duels/lobby.png" as="image">
  <script src="/external/skinview3d.bundle.js" type="module"></script>
  <script src="/external/minecrafttext.js"></script>
  <script src="/external/games.js"></script>
  <meta name="theme-color" content="#f6adc6">
  <meta property="og:site_name" content="nadeshiko.io">
  <meta property="twitter:image" content="https://minotar.net/helm/<%= playerData.uuid %>.png">

  <% if (playerData && playerData.profile) { %>
    <title><%- (playerData["profile"]["tagged_name"]).replace(/¬ß[A-Fa-f0-9]/g, "") %> | nadeshiko.io</title>
    <meta name="description" content="<%= playerData.status.online ? 'üü¢ Online!' : 'üî¥ Offline' %>

‚Ä¢ üåê Network Level: <%-(playerData.profile.network_level).toFixed(2)%>
‚Ä¢ üìú Quests Completed: <%-(playerData.profile.quests_completed).toLocaleString()%>
‚Ä¢ ‚òÆÔ∏è Karma: <%-(playerData.profile.karma).toLocaleString()%>
‚Ä¢ üèÜ Achievement Points: <%-(playerData.profile.achievement_points).toLocaleString()%>
‚Ä¢ üí∏ Ranks Gifted: <%-(playerData.profile.ranks_gifted).toLocaleString()%>">
  <% } else { %>
    <title><%- (playerData["name"]) %> | nadeshiko.io</title> <!-- Fallback in case no stats -->
    <meta name="description" content="üå∏ View Hypixel stats and generate real-time stat cards ‚Äì perfect for forum signatures or to show off to friends!">
  <% } %>
</head>

<body>
  <div class="background" id="background1"></div>
  <div class="background" id="background2" style="opacity: 0"></div>  
  <div class="background-filter"></div>

  <div class="nadeshiko-wrapper">
    <header>
      <%- include('partials/header') %>
      <div class="header2"> <!-- secondary header for game bar -->
        <div class="header-left">
          <p class="header-name unloaded" id="header-name"><span class="mc">Unknown</span></p>
        </div>
        <div class="header-right" id="game-buttons">
          <p class="header-game" onclick="switchStats('network')" id="button-network">Network</p>
          <p class="header-game" onclick="switchStats('bedwars')" id="button-bedwars">Bed Wars</p>
          <p class="header-game" onclick="switchStats('duels')" id="button-duels">Duels</p>
          <p class="header-game" onclick="switchStats('skywars')" id="button-skywars">SkyWars</p>
          <div class="dropdown">
            <p class="header-down dropdown-button">
              <img class="dropdown-arrow" src="/img/arrow.svg" alt="More games">
            </p>
              <div class="dropdown-content unloaded">
                <span class="mobile-exclusive">
                  <div onclick="switchStats('network')" aria-label="View Network stats"><span class="logo-container"><img src="/img/hypixel_logo.png" alt="" class="social-media-dropdown icon"></span> Network</div>
                  <div onclick="switchStats('bedwars')" aria-label="View Bed Wars stats"><span class="logo-container"><img src="/img/icon/minecraft/bedwars.png" alt="" class="social-media-dropdown icon"></span> Bed Wars</div>
                  <div onclick="switchStats('duels')" aria-label="View Duels stats"><span class="logo-container"><img src="/img/icon/minecraft/duels.png" alt="" class="social-media-dropdown icon"></span> Duels</div>
                  <div onclick="switchStats('skywars')" aria-label="View SkyWars stats"><span class="logo-container"><img src="/img/icon/minecraft/skywars.png" alt="" class="social-media-dropdown icon"></span> SkyWars</div>
                </span>
                <div onclick="switchStats('skyblock')" aria-label="View SkyBlock stats"><span class="logo-container"><img src="/img/icon/minecraft/skyblock.png" alt="" class="social-media-dropdown icon"></span> SkyBlock</div>
                <div onclick="switchStats('arcade')" aria-label="View Arcade stats"><span class="logo-container"><img src="/img/icon/minecraft/arcade.png" alt="" class="social-media-dropdown icon"></span> Arcade</div>
                <div onclick="switchStats('buildbattle')" aria-label="View Build Battle stats"><span class="logo-container"><img src="/img/icon/minecraft/buildbattle.png" alt="" class="social-media-dropdown icon"></span> Build Battle</div>
                <div onclick="switchStats('murdermystery')" aria-label="View Murder Mystery stats"><span class="logo-container"><img src="/img/icon/minecraft/murdermystery.png" alt="" class="social-media-dropdown icon"></span> Murder Mystery</div>
                <div onclick="switchStats('tntgames')" aria-label="View TNT Games stats"><span class="logo-container"><img src="/img/icon/minecraft/tntgames.png" alt="" class="social-media-dropdown icon"></span> TNT Games</div>
                <div onclick="switchStats('pit')" aria-label="View Pit stats"><span class="logo-container"><img src="/img/icon/minecraft/pit.png" alt="" class="social-media-dropdown icon"></span> Pit</div>
                <div onclick="switchStats('classic')" aria-label="View Classic stats"><span class="logo-container"><img src="/img/icon/minecraft/classic.png" alt="" class="social-media-dropdown icon"></span> Classic Games</div>
                <div onclick="switchStats('megawalls')" aria-label="View Mega Walls stats"><span class="logo-container"><img src="/img/icon/minecraft/megawalls.png" alt="" class="social-media-dropdown icon"></span> Mega Walls</div>
                <div onclick="switchStats('copsandcrims')" aria-label="View Cops and Crims stats"><span class="logo-container"><img src="/img/icon/minecraft/copsandcrims.png" alt="" class="social-media-dropdown icon"></span> Cops and Crims</div>
                <div onclick="switchStats('uhc')" aria-label="View UHC stats"><span class="logo-container"><img src="/img/icon/minecraft/uhc.png" alt="" class="social-media-dropdown icon"></span> UHC</div>
                <div onclick="switchStats('blitz')" aria-label="View Blitz stats"><span class="logo-container"><img src="/img/icon/minecraft/blitz.png" alt="" class="social-media-dropdown icon"></span> Blitz</div>
                <div onclick="switchStats('woolwars')" aria-label="View Wool Wars stats"><span class="logo-container"><img src="/img/icon/minecraft/woolwars.png" alt="" class="social-media-dropdown icon"></span> Wool Wars</div>
                <div onclick="switchStats('warlords')" aria-label="View Warlords stats"><span class="logo-container"><img src="/img/icon/minecraft/warlords.png" alt="" class="social-media-dropdown icon"></span> Warlords</div>
                <div onclick="switchStats('smashheroes')" aria-label="View Smash Heroes stats"><span class="logo-container"><img src="/img/icon/minecraft/smash.png" alt="" class="social-media-dropdown icon"></span> Smash Heroes</div>
              </div>
            
          </div>
        </div>
      </div>
    </header>   
    
    <div class="games" id="games">
      <div class="flex-container unloaded" id="flex-container-network"> <!-- network stats -->
        <canvas id="skin-container" class="avatar unloaded" style="background-color: transparent"></canvas>
        <section class="player-card" id="player-card">
          <div class="player-info">
            <div class="details">
              <div class="flex-two-item unless-tiny">
                <span class="player-name">
                  <span class="rank" id="card-rank"><span id="card-ranktext"><span class="mc">Unknown</span></span></span> <span class="m7" id="card-name"><span class="mc">Unknown</span></span> <span id="card-guild"><span class="mc">Unknown</span></span><img class="special icon smallicon unloaded" id="special" alt="User badge">
                </span>
                <span id="online-status"><span class="mc">Unknown</span></span>
              </div>
  
              <div class="extended-card" id="extended-card">
                <div id="real-stats">
                <p id="level-container-container"><span id="level-container">Level <span id="level" class="statistic"><span class="mc">Unknown</span></span></span> <span class="m8">(<span id="multiplier">1</span>&times;)</span></p>
                <div class="progress-bar">
                  <span class="progress-number" id="xp-progress-number"><span class="mc">Unknown</span></span>
                  <div class="progress" style="width: 0%;" id="xp-progress-bar"></div>
                </div>
                <div class="stats">
                  <div class="login-info flex-two-item">
                    <p class="flex-item margin10">First Login <span class="tooltip"><span class="statistic" id="first-login"><span class="mc">Unknown</span></span><span class="tooltiptext" id="first-login-ago-full"></span></span> <span id="first-login-ago"><span class="mc">Unknown</span></span></p>
                    <span class="tooltip"><img id="birthday" class="icon tinyicon" src="/img/special/cake.png"><span class="tooltiptext" id="birthday-text"></span></span></p>
  
                    <p id="last-login-container" class="flex-item login-duo">Last Login <span class="tooltip"><span class="statistic" id="last-login"><span class="mc">Unknown</span></span><span class="tooltiptext" id="last-login-ago-full"></span></span> <span id="last-login-ago"><span class="mc">Unknown</span></span></p>
                  </div>
                  <div class="flex-two-item general-guild">
                    <div class="general-stats flex-item">
                      <p class="stat-title">General</p>
                      <p>Achievement Points <span class="statistic" id="achievement-points"><span class="mc">Unknown</span></span></p>
                      <p>Karma <span class="statistic" id="karma"><span class="mc">Unknown</span></span></p>
                      <p>Quests Completed <span class="statistic" id="quests-completed"><span class="mc">Unknown</span></span></p>
                      <p>Ranks Gifted <span class="statistic" id="ranks-gifted"><span class="mc">Unknown</span></span></p>
                    </div>
                    <div class="general-stats flex-item" id="guild-stats">
                      <p class="stat-title">Guild</p>
                      <p>Name <span class="statistic" id="guild-name"><span class="mc">Unknown</span></span> <span id="guild-tag"><span class="mc">Unknown</span></span></span></p>
                      <p>Level <span class="statistic" id="guild-level"><span class="mc">Unknown</span></span></p>
                      <p>Members <span class="statistic" id="guild-members"><span class="mc">Unknown</span></span></p>
                      <p>Joined <span class="statistic" id="guild-joined"><span class="mc">Unknown</span></span> <span id="guild-joined-ago"><span class="mc">Unknown</span></span></p>
                    </div>
                  </div>
                </div>
              </div>
  
                <div id="network-error" style="display: none">
                  <p class="title-text" id="error-title">No Hypixel Stats</p>
                  <p class="subtitle-text" id="error-subtitle">This player has no Hypixel stats.</p>
                </div>
              </div>
              <div class="flex-two-item socials-buttons" id="general-bottom-bar">
                <div class="buttons">
                  <span class="general-button mright" onclick="showCardWizard('NETWORK')">Generate Card</span>
                  
                  <a target="_blank" href="https://sky.shiiyu.moe/stats/<%= playerData.uuid %>" class="mright" style="text-decoration: none;"><span class="general-button"><img src="/img/skycrypt.svg" class="shiiyu" alt="SkyCrypt logo">SkyBlock Stats</span></a>

                  <div class="dropdown">
                  <span class="general-button dropdown-button" onclick="" id="social-media-button">Socials</span>         <div class="dropdown-content unloaded" id="social-media-alternative">
                    <a target="_blank" id="social-hypixel-alternative" aria-label="View Hypixel Forums profile"><span class="logo-container"><img src="/img/hypixel.svg" alt="" class="social-media-dropdown"></span> Hypixel</a>
                    <a target="_blank" id="social-youtube-alternative" aria-label="View linked YouTube"><span class="logo-container"><img src="/img/youtube.svg" alt="" class="social-media-dropdown"></span> YouTube</a>
                    <a target="_blank" id="social-twitter-alternative" aria-label="View linked Twitter"><span class="logo-container"><img src="/img/twitter.svg" alt="" class="social-media-dropdown"></span> Twitter</a>
                    <a target="_blank" id="social-tiktok-alternative" aria-label="View linked TikTok"><span class="logo-container"><img src="/img/tiktok.svg" alt="" class="social-media-dropdown"></span> TikTok</a>
                    <a target="_blank" id="social-twitch-alternative" aria-label="View linked Twitch"><span class="logo-container"><img src="/img/twitch.svg" alt="" class="social-media-dropdown"></span> Twitch</a>
                    <a target="_blank" id="social-discord-alternative" onclick="copyText('social-discord-username', true)" aria-label="View linked Discord"><span class="logo-container"><img src="/img/discord.svg" alt="" class="social-media-dropdown"></span> <span id="social-discord-username-alternative">Discord</span></a>
                </div></div>
                </div>
                
                <div class="socials flex-two-item flex-separated" id="social-media">
                  <a target="_blank" id="sociallink-hypixel" aria-label="View Hypixel Forums profile"><img src="/img/hypixel.svg" class="social-media-logo mright" id="social-hypixel" alt="Hypixel logo"></a>
                  <a target="_blank" id="sociallink-youtube" aria-label="View linked YouTube"><img src="/img/youtube.svg" class="social-media-logo mleft mright" id="social-youtube" alt="YouTube logo"></a>
                  <a target="_blank" id="sociallink-twitter" aria-label="View linked Twitter"><img src="/img/twitter.svg" class="social-media-logo mright mleft" id="social-twitter" alt="Twitter logo"></a>
                  <a target="_blank" id="sociallink-tiktok" aria-label="View linked TikTok"><img src="/img/tiktok.svg" class="social-media-logo mleft mright" id="social-tiktok" alt="TikTok logo"></a>
                  <a target="_blank" id="sociallink-twitch" aria-label="View linked Twitch"><img src="/img/twitch.svg" class="social-media-logo mright mleft" id="social-twitch" alt="Twitch logo"></a>
                  <a target="_blank" id="sociallink-discord" onclick="copyText('social-discord-username', true)" aria-label="View linked Discord" style="display: flex; align-items: center"><img src="/img/discord.svg" class="mleft social-media-discord" id="social-discord" alt="Discord logo"><p class="w500 mleft" id="social-discord-username"></p></a>
                </div>
              </div>
            </div>
          </div>
  
        </section>
      </div>


      
      <div class="flex-container unloaded minigame-flex-container" id="flex-container-bedwars">
        <!-- bed wars stats -->
        <div class="chip-container">
          <div class="chip-small but-big">
            <div class="chip-small-background-filter"></div>
            <p class="chip-small-title">Bed Wars</p>
            <div class="chip-small-container">
              <p class="margin10">
                <span id="bed-wars-level-container" class="linear-gradient">Level <span class="w500" id="bed-wars-level"></span></span>
              </p>
              <div class="progress-bar">
                <span class="progress-number" id="bed-wars-xp-progress-number"><span class="mc">Unknown</span></span>
                <div class="progress" style="width: 0%;" id="bed-wars-xp-progress-bar"></div>
              </div>
              <div class="flex-two-item align-top flippable margin10">
                <div class="card-big-stats">
                  <p class="super-subtitle">Stats</p>
                  <div class="chip-small-statistic-row">
                      <p>Winstreak <span class="statistic" id="bed-wars-overall-winstreak"></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                      <p>Wins <span class="statistic" id="bed-wars-overall-wins"><span class="mc">Unknown</span></span></p>
                      <p>Losses <span class="statistic" id="bed-wars-overall-losses"><span class="mc">Unknown</span></span></p>
                      <p>W/L R <span class="statistic" id="bed-wars-overall-wlr"><span class="mc">Unknown</span></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                      <p>Kills <span class="statistic" id="bed-wars-overall-kills"><span class="mc">Unknown</span></span></p>
                      <p>Deaths <span class="statistic" id="bed-wars-overall-deaths"><span class="mc">Unknown</span></span></p>
                      <p>K/D R <span class="statistic" id="bed-wars-overall-kdr"><span class="mc">Unknown</span></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                      <p>Final Kills <span class="statistic" id="bed-wars-overall-final_kills"><span class="mc">Unknown</span></span></p>
                      <p>Final Deaths <span class="statistic" id="bed-wars-overall-final_deaths"><span class="mc">Unknown</span></span></p>
                      <p>FK/D R <span class="statistic" id="bed-wars-overall-fkdr"><span class="mc">Unknown</span></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                      <p>Beds Broken <span class="statistic" id="bed-wars-overall-beds_broken"><span class="mc">Unknown</span></span></p>
                      <p>Beds Lost <span class="statistic" id="bed-wars-overall-beds_lost"><span class="mc">Unknown</span></span></p>
                      <p>BB/L R <span class="statistic" id="bed-wars-overall-bblr"><span class="mc">Unknown</span></span></p>
                  </div>
                </div>
                <div class="card-big-misc">
                  <p class="super-subtitle">Misc</p>
                  <div class="chip-small-statistic-row">
                      <p>Tokens <span class="statistic" id="bed-wars-tokens"><span class="mc">Unknown</span></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                    <p>Slumber Tickets <span class="statistic" id="bed-wars-slumber-tickets">0</span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                    <p>Challenges Completed <span class="statistic" id="bed-wars-challenges-completed"><span class="mc">Unknown</span></span> <span class="m8" id="bed-wars-unique-challenges-completed">(0/30)</span></p>
                  </div>
                </div>
              </div>
            </div>
            <span class="general-button mright margin-top-bottom" onclick="showCardWizard('BEDWARS')">Generate Card</span>
          </div>
          <div class="flex-two-item chip-container-duo-parent" id="bed-wars-chips">
            <div id="bed-wars-chips-1" class="chip-container-duo">
            </div>
            <div id="bed-wars-chips-2" class="chip-container-duo">
            </div>
          </div>
        </div>
    </div>

    <div class="flex-container unloaded minigame-flex-container" id="flex-container-skywars">
      <!-- skywars stats -->
      <div class="chip-container">
        <div class="chip-small but-big">
          <div class="chip-small-background-filter"></div>
          <p class="chip-small-title">SkyWars</p>
          <div class="chip-small-container">
            <p class="margin10">
              Level <span class="w500" id="skywars-level"><span class="m7">1‚ãÜ</span></span>
            </p>
            <div class="progress-bar">
              <span class="progress-number" id="skywars-xp-progress-number"><span class="mc">Unknown</span></span>
              <div class="progress" style="width: 0%;" id="skywars-xp-progress-bar"></div>
            </div>
            <div class="flex-two-item align-top flippable margin10">
              <div class="card-big-stats">
                <p class="super-subtitle">Stats</p>
                <div class="chip-small-statistic-row">
                    <p>Wins <span class="statistic" id="skywars-overall-wins"><span class="mc">Unknown</span></span></p>
                    <p>Losses <span class="statistic" id="skywars-overall-losses"><span class="mc">Unknown</span></span></p>
                    <p>W/L R <span class="statistic" id="skywars-overall-wlr"><span class="mc">Unknown</span></span></p>
                </div>
                <div class="chip-small-statistic-row">
                    <p>Kills <span class="statistic" id="skywars-overall-kills"><span class="mc">Unknown</span></span></p>
                    <p>Deaths <span class="statistic" id="skywars-overall-deaths"><span class="mc">Unknown</span></span></p>
                    <p>K/D R <span class="statistic" id="skywars-overall-kdr"><span class="mc">Unknown</span></span></p>
                </div>
              </div>
              <div class="card-big-misc">
                <p class="super-subtitle">Misc</p>
                <div class="chip-small-statistic-row">
                    <p>Coins <span class="statistic" id="skywars-overall-coins"><span class="mc">Unknown</span></span></p>
                    <p>Tokens <span class="statistic" id="skywars-overall-cosmetic_tokens"><span class="mc">Unknown</span></span></p>
                </div>
                <div class="chip-small-statistic-row">
                    <p>Heads <span class="statistic" id="skywars-overall-heads"><span class="mc">Unknown</span></span></p>
                    <p>Corruption <span class="statistic" id="skywars-overall-corruption-chance"><span class="mc">Unknown</span></span></p>
                </div>
                <div class="chip-small-statistic-row">
                  <p>Chests <span class="statistic" id="skywars-overall-chests_opened"><span class="mc">Unknown</span></span></p>
                  <p>Playtime <span class="statistic" id="skywars-overall-playtime"><span class="mc">Unknown</span></span></p>
                </div>
              </div>
            </div>
          </div>
          <span class="general-button mright margin-top-bottom" onclick="showCardWizard('SKYWARS')">Generate Card</span>
        </div>
        <div class="flex-two-item chip-container-duo-parent" id="skywars-chips">
          <div id="skywars-chips-1" class="chip-container-duo">
          </div>
          <div id="skywars-chips-2" class="chip-container-duo">
          </div>
        </div>
      </div>
    </div>

    <div class="flex-container unloaded minigame-flex-container" id="flex-container-duels">
        <!-- duels stats -->
        <div class="chip-container">
          <div class="chip-small but-big">
            <div class="chip-small-background-filter"></div>
            <p class="chip-small-title">Duels</p>
            <div class="chip-small-container">
              <p class="margin10">
                <span id="duels-overall-title"></span> <span id="duels-overall-to-go"></span>
              </p>
              <div class="progress-bar">
                <span class="progress-number" id="duels-overall-progress-number"><span class="mc">Unknown</span></span>
                <div class="progress" style="width: 0%;" id="duels-overall-progress-bar"></div>
              </div>
              <div class="flex-two-item align-top flippable margin10">
                <div class="card-big-stats">
                  <p class="super-subtitle">Stats</p>
                  <div class="chip-small-statistic-row">
                      <p>Winstreak <span class="statistic" id="duels-overall-current_winstreak"></span></p>
                      <p>Best Winstreak <span class="statistic" id="duels-overall-best_overall_winstreak"></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                      <p>Wins <span class="statistic" id="duels-overall-wins"><span class="mc">Unknown</span></span></p>
                      <p>Losses <span class="statistic" id="duels-overall-losses"><span class="mc">Unknown</span></span></p>
                      <p>W/L R <span class="statistic" id="duels-overall-wlr"><span class="mc">Unknown</span></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                      <p>Kills <span class="statistic" id="duels-overall-kills"><span class="mc">Unknown</span></span></p>
                      <p>Deaths <span class="statistic" id="duels-overall-deaths"><span class="mc">Unknown</span></span></p>
                      <p>K/D R <span class="statistic" id="duels-overall-kdr"><span class="mc">Unknown</span></span></p>
                  </div>
                </div>
                <div class="card-big-misc">
                  <p class="super-subtitle">Misc</p>
                  <div class="chip-small-statistic-row">
                      <p>Tokens <span class="statistic" id="duels-overall-coins"><span class="mc">Unknown</span></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                    <p>Damage Dealt <span class="statistic" id="duels-overall-damage-dealt"><span class="mc">Unknown</span></span></p>
                  </div>
                  <div class="chip-small-statistic-row">
                    <p>Clicks <span class="statistic" id="duels-overall-melee_swings"><span class="mc">Unknown</span></span></p>
                  </div>
                </div>
              </div>
            </div>
            <span class="general-button mright margin-top-bottom" onclick="showCardWizard('DUELS')">Generate Card</span>
          </div>
          <div class="flex-two-item chip-container-duo-parent" id="duels-chips">
            <div id="duels-chips-1" class="chip-container-duo">
            </div>
            <div id="duels-chips-2" class="chip-container-duo">
            </div>
          </div>
      </div>
    </div>

    <div class="flex-container unloaded" id="flex-container-skyblock">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming soon!</p>
        <p class="subtitle-text">We'll be adding SkyBlock to nadeshiko shortly.</p>
      </section>
    </div>

    <div class="flex-container unloaded" id="flex-container-arcade">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming soon!</p>
        <p class="subtitle-text">We'll be adding Arcade to nadeshiko shortly.</p>
      </section>
    </div>

    <div class="flex-container unloaded minigame-flex-container" id="flex-container-buildbattle">
      <!-- build battle stats -->
      <div class="chip-container" id="buildbattle-chips">
        <div class="chip-small but-big">
          <div class="chip-small-background-filter"></div>
          <p class="chip-small-title">Build Battle</p>
          <div class="chip-small-container">
            <p class="margin10">
              <span id="buildbattle-overall-title"><span class="mc">Unknown</span></span> <span id="buildbattle-overall-to-go"></span>
            </p>
            <div class="progress-bar">
              <span class="progress-number" id="buildbattle-overall-progress-number"><span class="mc">Unknown</span></span>
              <div class="progress" style="width: 0%;" id="buildbattle-overall-progress-bar"></div>
            </div>
            <div class="flex-two-item align-top flippable margin10">
              <div class="card-big-stats">
                <p class="super-subtitle">Stats</p>
                <div class="chip-small-statistic-row">
                    <p>Score <span class="statistic" id="buildbattle-overall-score"><span class="mc">Unknown</span></span></p>
                </div>
                <div class="chip-small-statistic-row">
                    <p>Wins <span class="statistic" id="buildbattle-overall-wins"><span class="mc">Unknown</span></span></p>
                    <p>Losses <span class="statistic" id="buildbattle-overall-losses"><span class="mc">Unknown</span></span></p>
                    <p>W/L R <span class="statistic" id="buildbattle-overall-wlr"><span class="mc">Unknown</span></span></p>
                </div>
              </div>
              <div class="card-big-misc">
                <p class="super-subtitle">Misc</p>
                <div class="chip-small-statistic-row">
                    <p>Tokens <span class="statistic" id="buildbattle-overall-coins"><span class="mc">Unknown</span></span></p>
                </div>
                <div class="chip-small-statistic-row">
                  <p>Votes <span class="statistic" id="buildbattle-overall-total_votes"><span class="mc">Unknown</span></span></p>
                </div>
                <div class="chip-small-statistic-row">
                  <p>Highest Score <span class="statistic" id="buildbattle-overall-highest-score"><span class="mc">chloe plz add achievements to nadeshiko api</span></span></p>
                </div>
              </div>
            </div>
          </div>
          <span class="general-button mright margin-top-bottom" onclick="showCardWizard('BUILDBATTLE')">Generate Card</span>
        </div>
        <div class="flex-two-item chip-container-duo-parent" id="buildbattle-chips">
          <div id="buildbattle-chips-1" class="chip-container-duo">
          </div>
          <div id="buildbattle-chips-2" class="chip-container-duo">
          </div>
        </div>
    </div>
  </div>

  <div class="flex-container unloaded minigame-flex-container" id="flex-container-murdermystery">
    <!-- murder mystery stats -->
    <div class="chip-container">
      <div class="chip-small but-big">
        <div class="chip-small-background-filter"></div>
        <p class="chip-small-title">Murder Mystery</p>
        <div class="chip-small-container">
          <div class="flex-two-item align-top flippable margin10">
            <div class="card-big-stats">
              <p class="super-subtitle">Stats</p>
              <div class="chip-small-statistic-row">
                  <p>Wins <span class="statistic" id="murdermystery-overall-wins"><span class="mc">Unknown</span></span></p>
                  <p>Losses <span class="statistic" id="murdermystery-overall-losses"><span class="mc">Unknown</span></span></p>
                  <p>W/L R <span class="statistic" id="murdermystery-overall-wlr"><span class="mc">Unknown</span></span></p>
              </div>
              <div class="chip-small-statistic-row">
                <p>Kills <span class="statistic" id="murdermystery-overall-kills"><span class="mc">Unknown</span></span></p>
                <p>Deaths <span class="statistic" id="murdermystery-overall-deaths"><span class="mc">Unknown</span></span></p>
                <p>K/D R <span class="statistic" id="murdermystery-overall-kdr"><span class="mc">Unknown</span></span></p>
            </div>
            <div class="chip-small-statistic-row">
              <p>Wins (Murderer) <span class="statistic" id="murdermystery-overall-murderer_wins"><span class="mc">Unknown</span></span></p>
              <p>Wins (Detective) <span class="statistic" id="murdermystery-overall-detective_wins"><span class="mc">Unknown</span></span></p>
          </div>
            <div class="chip-small-statistic-row">
              <p>Fastest Win (Murderer) <span class="statistic" id="murdermystery-overall-quickest_murderer_win_time_seconds"><span class="mc">Unknown</span></span></p>
              <p>Fastest Win (Detective) <span class="statistic" id="murdermystery-overall-quickest_detective_win_time_seconds"><span class="mc">Unknown</span></span></p>
          </div>
            </div>
            <div class="card-big-misc">
              <p class="super-subtitle">Misc</p>
              <div class="chip-small-statistic-row">
                <p>Tokens <span class="statistic" id="murdermystery-overall-coins"><span class="mc">Unknown</span></span></p>
              </div>
              <div class="chip-small-statistic-row">
                <p>Gold Picked Up <span class="statistic" id="murdermystery-overall-coins_pickedup"><span class="mc">Unknown</span></span></p>
              </div>
              <div class="chip-small-statistic-row">
                <p>Kills (Murderer) <span class="statistic" id="murdermystery-overall-kills_as_murderer"><span class="mc">Unknown</span></span></p>
                <p>Wins (Hero) <span class="statistic" id="murdermystery-overall-was_hero"><span class="mc">Unknown</span></span></p>
              </div>
            </div>
          </div>
        </div>
        <span class="general-button mright margin-top-bottom" onclick="showCardWizard('MURDERMYSTERY')">Generate Card</span>
      </div>
      <div class="flex-two-item chip-container-duo-parent" id="murdermystery-chips">
        <div id="murdermystery-chips-1" class="chip-container-duo">
        </div>
        <div id="murdermystery-chips-2" class="chip-container-duo">
        </div>
      </div>
  </div>
</div>

    <div class="flex-container unloaded" id="flex-container-tntgames">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming soon!</p>
        <p class="subtitle-text">We'll be adding the TNT Games to nadeshiko shortly.</p>
      </section>
    </div>

    <div class="flex-container unloaded" id="flex-container-pit">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming soon!</p>
        <p class="subtitle-text">We'll be adding Pit to nadeshiko shortly.</p>
      </section>
    </div>


    <div class="flex-container unloaded" id="flex-container-blitz">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming eventually!</p>
        <p class="subtitle-text">We'll be adding Blitz to nadeshiko sometime in the near future.</p>
      </section>
    </div>
    <div class="flex-container unloaded" id="flex-container-classic">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming eventually!</p>
        <p class="subtitle-text">We'll be adding Classic Games to nadeshiko sometime in the near future.</p>
      </section>
    </div>

    <div class="flex-container unloaded" id="flex-container-copsandcrims">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming eventually!</p>
        <p class="subtitle-text">We'll be adding Cops and Crims to nadeshiko sometime in the near future.</p>
      </section>
    </div>

    <div class="flex-container unloaded" id="flex-container-uhc">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming eventually!</p>
        <p class="subtitle-text">We'll be adding UHC to nadeshiko sometime in the near future.</p>
      </section>
    </div>
    <div class="flex-container unloaded" id="flex-container-smashheroes">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming eventually!</p>
        <p class="subtitle-text">We'll be adding Smash Heroes to nadeshiko sometime in the near future.</p>
      </section>
    </div>
    <div class="flex-container unloaded" id="flex-container-megawalls">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming eventually!</p>
        <p class="subtitle-text">We'll be adding Mega Walls to nadeshiko sometime in the near future.</p>
      </section>
    </div>

    <div class="flex-container unloaded" id="flex-container-woolwars">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming eventually!</p>
        <p class="subtitle-text">We'll be adding Wool Wars to nadeshiko sometime in the near future.</p>
      </section>
    </div>

    <div class="flex-container unloaded" id="flex-container-warlords">
      <section class="player-card" id="player-card" style="align-content: center;">
        <p class="title-text">Coming eventually!</p>
        <p class="subtitle-text">We'll be adding Warlords to nadeshiko sometime in the near future.</p>
      </section>
    </div>
  </div>

  <div class="quick-mode hidden pushdown" id="quick-mode">
    <section class="player-card" id="player-card" style="align-content: center;">
      <p class="title-text margin-top-bottom">Quick Mode</p>
      <p class="subtitle-text">Click an icon to instantly go to that game's page for <span id="quick-mode-username"></span>.</p>
      <p class="flex-quick-mode margin-top-bottom">
        <span class="tooltip quick-mode-game-container"><img src="/img/icon/hypixel/skyblock.png" alt="" class="quick-mode-game" onclick="switchStats('skyblock')"><span class="tooltiptext">SkyBlock</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/bedwars.png" alt="" class="quick-mode-game" onclick="switchStats('bedwars')"><span class="tooltiptext">Bed Wars</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/duels.png" alt="" class="quick-mode-game" onclick="switchStats('duels')"><span class="tooltiptext">Duels</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/skywars.png" alt="" class="quick-mode-game" onclick="switchStats('skywars')"><span class="tooltiptext">SkyWars</span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/arcade.png" alt="" class="quick-mode-game" onclick="switchStats('arcade')"><span class="tooltiptext">Arcade</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/buildbattle.png" alt="" class="quick-mode-game" onclick="switchStats('buildbattle')"><span class="tooltiptext">Build Battle</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/murdermystery.png" alt="" class="quick-mode-game" onclick="switchStats('murdermystery')"><span class="tooltiptext">Murder Mystery</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/tntgames.png" alt="" class="quick-mode-game" onclick="switchStats('tntgames')"><span class="tooltiptext">TNT Games</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/pit.png" alt="" class="quick-mode-game" onclick="switchStats('pit')"><span class="tooltiptext">Pit</span></span></span>
      </p>
      <p class="flex-quick-mode margin-top-bottom">
        <span class="tooltip"><img src="/img/icon/hypixel/classic.png" alt="" class="quick-mode-game" onclick="switchStats('classic')"><span class="tooltiptext">Classic Games</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/megawalls.png" alt="" class="quick-mode-game" onclick="switchStats('megawalls')"><span class="tooltiptext">Mega Walls</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/copsandcrims.png" alt="" class="quick-mode-game" onclick="switchStats('copsandcrims')"><span class="tooltiptext">Cops and Crims</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/uhc.png" alt="" class="quick-mode-game" onclick="switchStats('uhc')"><span class="tooltiptext">UHC</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/blitz.png" alt="" class="quick-mode-game" onclick="switchStats('blitz')"><span class="tooltiptext">Blitz</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/woolwars.png" alt="" class="quick-mode-game" onclick="switchStats('woolwars')"><span class="tooltiptext">Wool Wars</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/warlords.png" alt="" class="quick-mode-game" onclick="switchStats('warlords')"><span class="tooltiptext">Warlords</span></span></span>
        <span class="tooltip"><img src="/img/icon/hypixel/smashheroes.png" alt="" class="quick-mode-game" onclick="switchStats('smashheroes')"><span class="tooltiptext">Smash Heroes</span></span></span>
      </p>
    </section>
  </div>  
    <footer>
      <%- include('partials/footer') %>
    </footer>
  </div>

  <div id="modal-card-wizard" class="modal">
    <div class="modal-content">
      <p id="modal-card-wizard-close">&times;</p>
      <div class="card-wizard-info">
        <p class="stat-title mbottom">Card Wizard</p>
        <p class="stat-subtitle">Use this tool to generate cute cards that you can put anywhere ‚Äì even in your Hypixel Forums signature!</p>
      </div>

      <div class="flex-two-item-basic">
      <p class="chip-small-subtitle">Username</p> 
      <input type="text" placeholder="Player" id="card-wizard-name"></input>
    </div>
      
      <div class="flex-two-item-basic">
          <p class="tooltip"><p class="chip-small-subtitle">Game</p><span class="tooltiptext">The game to be used in the card.</span></p>
          <div class="chip-small-dropdown">
            <select aria-label="Game Dropdown" id="card-wizard-game">
              <option value="NETWORK">Network</option>
              <option value="BEDWARS">Bed Wars</option>
              <option value="DUELS">Duels</option>
            </select>
          </div>
      </div>

    <div class="flex-two-item-basic">
    <p class="tooltip"><p class="chip-small-subtitle">Size</p><span class="tooltiptext">The height of the card.</span></p>
      <div class="chip-small-dropdown">
      <select aria-label="Card Size" id="card-wizard-size">
        <option value="FULL">Full</option>
    </select>
  </div>
</div>

  <span class="general-button" onclick="generateCard()">Generate Card</span>
  <input type="text" aria-label="Card Wizard Output" id="card-wizard-output" class="card-wizard-output" onclick="this.select()" value="Edit this card first!">
  </div>

<script>
  var playerData;
  var currentGamemode = "network";
  switchStats(currentGamemode);
  var mobileMode = (document.documentElement.clientWidth < 800);

  document.documentElement.style.setProperty('--accent', getComputedStyle(document.documentElement).getPropertyValue('--accent-' + currentGamemode));

  function und(text) { // Returns 0 in the case of a missing value
    if (text === null || text === undefined || Number.isNaN(text)) return 0;
    else return text;
  }

  playerName = "<%= name %>";
  playerData = JSON.parse(decodeURIComponent("<%- encodeURIComponent(JSON.stringify(playerData)) %>"));
  console.log(playerData);
  insertLoadedData();

  window.addEventListener("resize", checkMobileMode);

  document.addEventListener("DOMContentLoaded", function() { // Runs on page load
    try {
     skinViewer = new skinview3d.SkinViewer({ // Imports SkinView3D for the 3D skin.
         canvas: document.getElementById("skin-container"),
         width: 300,
         height: 400,
         model: (playerData["slim"] ? "slim" : "classic"),
         skin: playerData["skin"].replace("http:", "https:"),
         cape: playerData["cape"]?.replace("http:", "https:") ?? undefined
     });

     skinViewer.camera.position.set(-30, 9, 50); // Sets player orientation
     skinViewer.animation = new skinview3d.IdleAnimation();
     skinViewer.playerObject.cape.rotation.x = 1;

     skinViewer.controls.enableZoom = false;


     document.addEventListener('keydown', function(event) {
         if (event.keyCode === 16 && !isInputField(document.activeElement)) { // If LSHIFT pressed, adjust skin to sneak based on constants from Mine-imator
             skinViewer.animation.paused = true; // Cape can't move in the x direction while idle animation is on
             let skinViewerObject = skinViewer.playerObject;
             let skinViewerSkin = skinViewerObject.skin;

             skinViewerSkin.head.position.y = -2.5;

             skinViewerSkin.body.rotation.x = 0.4887;
             skinViewerSkin.body.position.y = -7;
             skinViewerSkin.body.position.z = -2;

             skinViewerSkin.leftArm.rotation.x = 0.3491;
             skinViewerSkin.leftArm.position.y = -3.5;

             skinViewerSkin.rightArm.rotation.x = 0.3491;
             skinViewerSkin.rightArm.position.y = -3.5;

             skinViewerSkin.leftLeg.position.x = 2;
             skinViewerSkin.leftLeg.position.y = -11;
             skinViewerSkin.leftLeg.position.z = -3.5;

             skinViewerSkin.rightLeg.position.x = -2;
             skinViewerSkin.rightLeg.position.y = -11;
             skinViewerSkin.rightLeg.position.z = -3.5;

             skinViewerObject.cape.rotation.x = 0.4365;
             skinViewerObject.cape.position.y = 7;
             skinViewerObject.cape.position.z = -2;
         }
     });


     document.addEventListener('keyup', function(event) {
         if (event.keyCode === 16) { // Removes sneak; sets values to defaults
             skinViewer.animation.paused = false;
             let skinViewerSkin = skinViewer.playerObject.skin;
             let skinViewerObject = skinViewer.playerObject;

             skinViewerSkin.head.position.y = 0;

             skinViewerSkin.body.rotation.x = 0;
             skinViewerSkin.body.position.y = -6;
             skinViewerSkin.body.position.z = 0;

             skinViewerSkin.leftArm.position.y = -2;
             skinViewerSkin.leftArm.rotation.x = 0;

             skinViewerSkin.rightArm.rotation.x = 0;
             skinViewerSkin.rightArm.position.y = -2;

             skinViewerSkin.leftLeg.position.x = 2;
             skinViewerSkin.leftLeg.position.y = -12;
             skinViewerSkin.leftLeg.position.z = 0;

             skinViewerSkin.rightLeg.position.x = -2;
             skinViewerSkin.rightLeg.position.y = -12;
             skinViewerSkin.rightLeg.position.z = 0;

             skinViewerObject.cape.rotation.x = 1.5714;
             skinViewerObject.cape.position.y = 8;
             skinViewerObject.cape.position.z = -2;
         }
     });

     document.getElementById("skin-container").classList.remove("unloaded");
 } catch (error) {
     console.error("Error loading SkinView3D!: " + error);
 }

    document.getElementById("flex-container-" + currentGamemode).classList.remove("unloaded");
      document.getElementById("header-name").classList.remove("unloaded");
  });

  function relativeTime(timestamp, currentTime = Date.now()) { // Returns a timestamp showing how long ago a date was in the past.
    let dateNew = new Date(currentTime);
    let dateOld = new Date(timestamp);

    let years = dateNew.getFullYear() - dateOld.getFullYear();
    let months = dateNew.getMonth() - dateOld.getMonth();
    let days = dateNew.getDate() - dateOld.getDate();
    let hours = dateNew.getHours() - dateOld.getHours();
    let minutes = dateNew.getMinutes() - dateOld.getMinutes();
    let seconds = dateNew.getSeconds() - dateOld.getSeconds();

    if (seconds < 0) {
      minutes--;
      seconds += 60;
    }

    if (minutes < 0) {
      hours--;
      minutes += 60;
    }

    if (hours < 0) {
      days--;
      hours += 24;
    }

    if (days < 0) {
      months--;
      days += new Date(dateOld.getFullYear(), dateOld.getMonth() + 1, 0).getDate(); // Ensures that a month has the correct number of days.
    }

    if (months < 0) {
      years--;
      months += 12;
    }

    if (years > 0) return `${years}y ago`;
    if (months > 0) return `${months}mo ago`;
    if (days > 0) return `${days}d ago`;
    if (hours > 0) return `${hours}h ago`;
    if (minutes > 0) return `${minutes}min ago`;
    if (seconds > 0) return `${seconds}s ago`;
    return "now!";
  }

  function cuteRank(text, style = 0) {
    if(style == 0) return generateMinecraftText(text);
    else {
      var playerRankColorRegexMatch = (text.match(/¬ß([0-9a-f])/));
      var playerRankColor = (playerRankColorRegexMatch == null) ? "7" : (playerRankColorRegexMatch)[1];

      if(playerRankColorRegexMatch != null) { var playerRankRest = (text.substring(2)).replace(/\[|\]/g, "") }
      else { var playerRankRest = text } // Emergency fallback if no section code is detected

      return([playerRankColor, generateMinecraftText(playerRankRest)]);
    }
  }


function isInputField(element) { // Determines if the user's actively in an input field (so Quick Mode and easter eggs don't get messed up)
  return (
    element.tagName === 'INPUT' || 
    element.tagName === 'TEXTAREA' || 
    element.isContentEditable
  );
}

function generateChip(stats_object, where) { // Converts an array of stats into an HTML chip for stats viewing

  console.log("generating stats object");
  console.log(stats_object);

  var fullCard = "";
  var selectionItems = "";

  fullCard += `<div class="chip-small"` + (stats_object[3] == undefined ? `>` : ` style="background-image: url(` + stats_object[3] + `);">`); // Adds parent div, background

  for(c = 0; c < stats_object[5].length; c++) {
    selectionItems += `<option value="${stats_object[5][c][1]}">${stats_object[5][c][0]}</option>`;
  }
  if(stats_object[5].length > 0) {
    selectionItems = `<div class="chip-small-dropdown"><select aria-label="${stats_object[1]} Mode" onchange="updateChipStats(event, '${stats_object[0]}', '${stats_object[7]}')">${selectionItems}</select></div>`;
  } else {
    selectionItems = "";
  }

  chipImage = ((stats_object[6] != undefined && stats_object[6] != "") ? `<img src="${stats_object[6]}" class="chip-icon" alt="">` : "")


  fullCard += `<div class="chip-small-top"><div class="chip-small-background-filter"></div> <p class="chip-small-title">${stats_object[1]}</p>${selectionItems + chipImage}</div><p class="chip-small-subtitle">${stats_object[2]}</p><div class="chip-small-container" id="${stats_object[0]}">`; // Adds title

  fullCard += generateChipStats(stats_object[4]);

  fullCard += `</div></div>`;

  document.getElementById(where).insertAdjacentHTML("beforeend", fullCard);
}

function generateChipStats(chipStatsSub) { // Generates the stats inside of the chip
  let chipStats = "";

  for(a = 0; a < chipStatsSub.length; a++) { // For each row in the chip
    chipStats += `<div class="chip-small-statistic-row ${chipStatsSub[a][0] ? `more-margin` : ``}">`;
    for(b = 1; b < chipStatsSub[a].length; b++) {
      chipItem = chipStatsSub[a][b];
      if(chipItem != undefined) {
        chipStats += `<p>${chipItem[0]} <span class="statistic">${chipItem[1]}</span></p>`;
      }
    }
    // add additional margin later
    chipStats += `</div>`;

  }
  return chipStats;
}

function openSelectedDropdown(dropdownId) {
  console.log("removed" + dropdownId)

  console.log(document.getElementById(dropdownId).classList)
    document.getElementById(dropdownId).classList.remove("unloaded");
    console.log(document.getElementById(dropdownId).classList)
}

document.querySelectorAll('.dropdown-button').forEach(function(button) {
  button.addEventListener('click', function() {
  console.log("Dropdown button clicked")
    var dropdownContent = this.nextElementSibling;

    if (dropdownContent.classList.contains("unloaded")) { // If not visible
    // Reset styles first
    dropdownContent.style.right = 'auto';
    dropdownContent.style.left = 'auto';
    dropdownContent.style.bottom = 'auto';
    dropdownContent.style.top = 'auto';

    // Get the bounding rectangle of the dropdown
    var dropdownRect = dropdownContent.getBoundingClientRect();

    // Check bottom edge
    if (window.innerHeight - dropdownRect.bottom < 30 || mobileMode) {
        // Adjust it upwards if it goes off bottom or in mobile mode
        dropdownContent.style.bottom = '100%';
        dropdownContent.style.top = 'auto';
    } else {
        dropdownContent.style.bottom = 'auto';
        dropdownContent.style.top = '100%';
    }

    dropdownRect = dropdownContent.getBoundingClientRect();
    if (dropdownRect.top < 0) { // If it still doesn't fit, call for desperate measures
        dropdownContent.style.top = '50%';
        dropdownContent.style.bottom = 'auto';
        dropdownContent.style.maxHeight = (window.innerHeight * 0.7) + 'px';
        dropdownContent.style.overflowY = 'scroll';
    }

    if (window.innerWidth - dropdownRect.right < 30) { // Check right edge
        dropdownContent.style.right = '0'; // Adjust it leftwards if it goes off right edge
        dropdownContent.style.left = 'auto';
    } else {
        dropdownContent.style.right = 'auto';
        dropdownContent.style.left = '0';
    }
}

    dropdownContent.classList.toggle('unloaded');
  });
});


window.addEventListener('click', function(event) {
  if (!event.target.matches('.dropdown-button') && !event.target.parentElement.matches('.dropdown-button')) {
    console.log(event.target)
    var dropdowns = document.getElementsByClassName("dropdown-content");
    for (var i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (!openDropdown.classList.contains("unloaded")) {
        openDropdown.classList.add("unloaded");
      }
    }
  }
});

function redirectToHttps() { // If the user's on the HTTP version of nadeshiko, switch to HTTPS
  windowLocation = window.location;

  if(windowLocation.protocol == "http:" && windowLocation.host != "localhost:8080") { // If the user's using HTTP (and it's not localhost)
      window.location = "https://nadeshiko.io" + windowLocation.pathname + windowLocation.search;
  }
}

var skinViewer;

 function insertLoadedData() {
      redirectToHttps();
      
      generateNetwork();
      checkMobileMode(event, true);

      console.log("Wow! All the stats are loaded!");
  }

  function ordinal(num) { // Returns the ordinal number format of an integer (3 ‚Üí 3rd)
    let ordinals = ["st", "nd", "rd"];
    for(a = 0; a < ordinals.length; a++) {
      if(num % 100 !== (11 + a) && num % 10 == (1 + a)) return (num + ordinals[a])
    }
    return num + "th";
  }


  function switchStats(gamemode) {
      gamesWithEasilyClickableButtons = ["network", "bedwars", "skywars", "duels"];
    //if(gamemode != currentGamemode) {
      if(gamesWithEasilyClickableButtons.indexOf(currentGamemode) != -1) {
        document.getElementById("button-" + currentGamemode).classList.remove("highlighted");
      }
      document.getElementById("flex-container-" + currentGamemode).classList.add("unloaded");
      
      currentGamemode = gamemode;

      if(gamesWithEasilyClickableButtons.indexOf(currentGamemode) != -1) {
        document.getElementById("button-" + currentGamemode).classList.add("highlighted");
      }
      document.documentElement.style.setProperty('--accent', getComputedStyle(document.documentElement).getPropertyValue('--accent-' + currentGamemode));
      document.getElementById("flex-container-" + currentGamemode).classList.remove("unloaded");
      setBackground(currentGamemode);
    //}
  }

  function setBackground(gamemode) { // Allows a fade between two backgrounds. Is this totally inefficient? Probably
     const bg1 = document.getElementById("background1");
     const bg2 = document.getElementById("background2");
     if (bg1.style.opacity == '1' || bg1.style.opacity === '') {
       bg2.style.backgroundImage = "url('/img/games/" + gamemode + "/lobby.png')";
       bg1.style.opacity = '0';
       bg2.style.opacity = '1';
     } else {
       bg1.style.backgroundImage = "url('/img/games/" + gamemode + "/lobby.png')";
       bg2.style.opacity = '0';
       bg1.style.opacity = '1';
     }
   }

  function copyText(text, isDocumentId) {
    if(isDocumentId) {
      navigator.clipboard.writeText(document.getElementById(text).innerText);
    } else {
      navigator.clipboard.writeText(text);
    }
  }

  function onShiftDown() {
    document.getElementById("games").classList.add("pushup");
    document.getElementById("games").classList.add("o30");
    document.getElementById("quick-mode").classList.remove("pushdown");
    document.getElementById("quick-mode").classList.remove("hidden");
  }

  function onShiftUp() {
      document.getElementById("games").classList.remove("pushup");
      document.getElementById("games").classList.remove("o30");
      document.getElementById("quick-mode").classList.add("pushdown");
      document.getElementById("quick-mode").classList.add("hidden");
  }

  let isShiftPressed = false;

  function handleKeyDown(event) {
      if (event.key === "Shift" && !isShiftPressed) {
          isShiftPressed = true;
          onShiftDown();
      }
  }

  function handleKeyUp(event) {
      if (event.key === "Shift" && isShiftPressed) {
          isShiftPressed = false;
          onShiftUp();
      }
  }

  function generateCard() {
    cardName = document.getElementById("card-wizard-name").value;
    cardGame = document.getElementById("card-wizard-game").value;
    cardSize = document.getElementById("card-wizard-size").value;

    document.getElementById("card-wizard-output").value = `https://nadeshiko.io/card/` + btoa(`{"name":"${cardName}","game":"${cardGame}","size":"${cardSize}"}`);
  }

  function handleVisibilityChange() {
      if (document.visibilityState === 'visible' && isShiftPressed) {
          isShiftPressed = false;
          onShiftUp();
      }
  }

  document.addEventListener('keydown', handleKeyDown);
  document.addEventListener('keyup', handleKeyUp);
  document.addEventListener('visibilitychange', handleVisibilityChange);

  function showCardWizard(game = "NETWORK") {
    document.getElementById("card-wizard-game").value = game;
    document.getElementById("card-wizard-name").value = playerData["name"];
    document.getElementById("card-wizard-output").value = `Click "Generate Card" to generate a card!`;
    document.getElementById("modal-card-wizard").style.opacity = "1";
    document.getElementById("modal-card-wizard").style.pointerEvents = "all";
  }

  document.getElementById("modal-card-wizard-close").onclick = function() {
    document.getElementById("modal-card-wizard").style.opacity = "0";
    document.getElementById("modal-card-wizard").style.pointerEvents = "none";
  }
  
  window.onclick = function(event) {
    if (event.target == document.getElementById("modal-card-wizard")) {
      document.getElementById("modal-card-wizard").style.opacity = "0";
      document.getElementById("modal-card-wizard").style.pointerEvents = "none";
    }
  }

  function checkMobileMode(event, override = false) {
    if (window.innerWidth < 800) {
      if (!mobileMode || override) {
        console.log("Mobile mode activated!" + override);
        mobileMode = true;
        const duoParents = document.querySelectorAll('.chip-container-duo-parent');

        duoParents.forEach(duoParent => {
          const parent1 = duoParent.children[0];
          const parent2 = duoParent.children[1];
          const children1 = Array.from(parent1.children);
          const children2 = Array.from(parent2.children);

          let maxLength = Math.max(children1.length, children2.length);
          for (let i = 0; i < maxLength; i++) {
            if (children1[i]) {
              parent1.appendChild(children1[i]);
            }
            if (children2[i]) {
              parent1.appendChild(children2[i]);
            }
          }

          parent2.style.display = 'none';
        });
      }
    } else {
      if (mobileMode) {
        mobileMode = false;
        const duoParents = document.querySelectorAll('.chip-container-duo-parent');

        duoParents.forEach(duoParent => {
          const parent1 = duoParent.children[0];
          const parent2 = duoParent.children[1];
          const children1 = Array.from(parent1.children);

          parent1.innerHTML = ''
          parent2.innerHTML = '';

          children1.forEach((child, index) => {
            if (index % 2 === 0) {
              parent1.appendChild(child);
            } else {
              parent2.appendChild(child);
            }
          });

          parent2.style.display = '';
        });
      }
    }
  }
</script> 
</body>
</html>b